---
title: "Simulation exercise using the exponential function"
author: "Rohil Narula"
date: "20 July 2018"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Simulation exercise

## Overview

This simulation exercise will draw $40$ variables from a random exponential distributtion of data with $\lambda = 0.2$. A mean distribution of $1000$ simulations will be sampled and the mean and variance of this distribution, calculated. Finally, a simple histogram plot will be used to visualize the distribution.

## Simulations

In this section, the initial variables are set, then each sample of the simulations will be stored as a row in a matrix. As we have $1000$ simulations, the matrix will by default contain $1000$ rows (as well as $40$ columns).

### Variable initialization

Loading initial packages.

```{r init, warning=FALSE, message=FALSE}
packages <- c('ggplot2', 'dplyr')
sapply(packages, require, character.only = TRUE, quietly = TRUE)
```

The initial variables are set to the following values.

```{r}
set.seed(9)
n <- 40
lambda <- 0.2
draws <- 1000
theoreticalMean <- 1 / lambda
theoreticalSD <- 1 / lambda
```

### Simulated matrix generation

The matrix of the random draws is calculated using the standard `R` function `rexp()`.

```{r matrix}
simulations <- matrix(rexp(n * draws, lambda), nrow = draws)
str(simulations)
```

## Sample versus theoretical mean

Calculating the means of the simulations.

```{r}
xBar <- rowMeans(simulations)
c(mean(xBar), theoreticalMean)
```

Plotting the means.

```{r, echo=FALSE}
g <- ggplot(data.frame(x = xBar, y = seq_along(xBar)), aes(x = y, y = x))
g + geom_point() + geom_hline(yintercept = mean(xBar), col = "salmon", lwd = 1.3) + geom_hline(yintercept = theoreticalMean, col = "aliceblue", lwd = 1.3) + theme_minimal()
``` 

As we can see in the data plot, the theoretical mean of the data and the estimated mean from the sample distribution almost overlap considering $1000$ simulations.
